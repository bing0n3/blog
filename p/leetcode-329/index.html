<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>[Leetcode] 329. Longest Increasing Path in a Matrix - bing0ne Base</title><meta name=description content="Program Description

Given an integer matrix, find the length of the longest increasing path.

From each cell, you can either move to four directions: left, right, up or down. You may NOT move diagonally or move outside of the boundary (i.e. wrap-around is not allowed)."><meta name=author content=bing0ne><link href=https://blog.bing0ne.com/an-old-hope.min.css rel=stylesheet><link href=https://blog.bing0ne.com/style.css rel=stylesheet><link rel=apple-touch-icon href=https://blog.bing0ne.com/apple-touch-icon.png><link rel=icon href=https://blog.bing0ne.com/favicon.ico><meta name=generator content="Hugo 0.58.2"><link rel=alternate type=application/atom+xml href=https://blog.bing0ne.com/index.xml title="bing0ne Base"><meta property=og:title content="[Leetcode] 329. Longest Increasing Path in a Matrix"><meta property=og:description content="Program Description

Given an integer matrix, find the length of the longest increasing path.

From each cell, you can either move to four directions: left, right, up or down. You may NOT move diagonally or move outside of the boundary (i.e. wrap-around is not allowed)."><meta property=og:type content=article><meta property=og:url content=https://blog.bing0ne.com/p/leetcode-329/><meta property=article:published_time content=2019-09-06T17:43:02-04:00><meta property=article:modified_time content=2019-09-06T17:43:02-04:00></head><body class=single><header class=header><nav class=nav><p class=logo><a href=https://blog.bing0ne.com>bing0ne Base</a></p><ul class=menu><li><a href=https://blog.bing0ne.com/>Home</a></li><li><a href=https://blog.bing0ne.com/categories/dev/>Dev</a></li><li><a href=https://blog.bing0ne.com/categories/eassy/>Eassy</a></li><li><a href=https://blog.bing0ne.com/categories/gsoc/>GSoC</a></li><li><a href=https://blog.bing0ne.com/tags/>Tags</a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>[Leetcode] 329. Longest Increasing Path in a Matrix</h1><div class=post-meta>bing0ne · September 6, 2019</div></header><div class=post-content><h2 id=program-description>Program Description</h2><p>Given an integer matrix, find the length of the longest increasing path.</p><p>From each cell, you can either move to four directions: left, right, up or down. You may NOT move diagonally or move outside of the boundary (i.e. wrap-around is not allowed).</p><h3 id=example-1>Example 1:</h3><pre><code>Input: nums = 
[
  [9,9,4],
  [6,6,8],
  [2,1,1]
] 
Output: 4 
Explanation: The longest increasing path is [1, 2, 6, 9].
</code></pre><h3 id=example-2>Example 2:</h3><pre><code>Input: nums = 
[
  [3,4,5],
  [3,2,6],
  [2,2,1]
] 
Output: 4 
Explanation: The longest increasing path is [3, 4, 5, 6]. Moving diagonally is not allowed.
</code></pre><h2 id=solution>Solution</h2><h3 id=backtracking>Backtracking</h3><p>My first idea about this problem is backtracking. Iterate all element in matrix to find all possible path and get the longest one. This method works when matrix is not large, However it reached <em>Time Limit Exceeded</em> in larger matrix in test case.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>longestIncreasingPath</span>(<span style=color:#a6e22e>matrix</span> [][]<span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {

	<span style=color:#66d9ef>if</span> len(<span style=color:#a6e22e>matrix</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>
	}
	<span style=color:#75715e>//backtracking
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>maxCnt</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>res</span> <span style=color:#66d9ef>int</span>
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; len(<span style=color:#a6e22e>matrix</span>); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> &lt; len(<span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>0</span>]); <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span> {
			<span style=color:#a6e22e>res</span> = <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
			<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>res</span> &gt; <span style=color:#a6e22e>maxCnt</span> {
				<span style=color:#a6e22e>maxCnt</span> = <span style=color:#a6e22e>res</span>
			}
		}
	}

	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>maxCnt</span>

}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span> [][]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>prv</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {
	<span style=color:#75715e>// return the largest one from four direction
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>==</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>
	}

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>prv</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>
	}

	<span style=color:#a6e22e>tmp</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>]
	<span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] = <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>

	<span style=color:#75715e>// is boarder？
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>up</span>, <span style=color:#a6e22e>down</span>, <span style=color:#a6e22e>right</span>, <span style=color:#a6e22e>left</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span> &lt; len(<span style=color:#a6e22e>matrix</span>) {
		<span style=color:#a6e22e>up</span> = <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>i</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>j</span>, <span style=color:#a6e22e>tmp</span>)
	}
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> {
		<span style=color:#a6e22e>down</span> = <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>i</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>j</span>, <span style=color:#a6e22e>tmp</span>)
	}

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>j</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span> &lt; len(<span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>0</span>]) {
		<span style=color:#a6e22e>right</span> = <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>tmp</span>)
	}

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>j</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> {
		<span style=color:#a6e22e>left</span> = <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>tmp</span>)
	}

	<span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] = <span style=color:#a6e22e>tmp</span>

	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>left</span>, <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>down</span>, <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>right</span>, <span style=color:#a6e22e>up</span>))) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>a</span> &gt; <span style=color:#a6e22e>b</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span>
	} <span style=color:#66d9ef>else</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>b</span>
	}
}</code></pre></div><h3 id=dp>DP</h3><p>To avoid this problem, we can use dynamic programing method and the core things is that we don&rsquo;t need to care vistied array because we need a increasing path. It is impossible to access a element twice in a increasing path. So we can use memorization to optimize our backtracking method.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>longestIncreasingPath</span>(<span style=color:#a6e22e>matrix</span> [][]<span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {
    
    <span style=color:#66d9ef>if</span> len(<span style=color:#a6e22e>matrix</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>
    }
    <span style=color:#75715e>//backtracking
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>maxCnt</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
    
    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>res</span> <span style=color:#66d9ef>int</span>
    
    <span style=color:#75715e>// memorization 
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>dp</span> <span style=color:#f92672>:=</span> [][]<span style=color:#66d9ef>int</span>{}
    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; len(<span style=color:#a6e22e>matrix</span>); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
        <span style=color:#a6e22e>dp</span> = append(<span style=color:#a6e22e>dp</span>, []<span style=color:#66d9ef>int</span>{})
        <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> &lt; len(<span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>0</span>]); <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span> {
            <span style=color:#a6e22e>dp</span>[<span style=color:#a6e22e>i</span>] = append(<span style=color:#a6e22e>dp</span>[<span style=color:#a6e22e>i</span>], <span style=color:#ae81ff>0</span>)
        }
    }
    
    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; len(<span style=color:#a6e22e>matrix</span>); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
        <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> &lt; len(<span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>0</span>]); <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span> {
            <span style=color:#a6e22e>res</span> = <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>dp</span>, <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span>)
            <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>res</span> &gt; <span style=color:#a6e22e>maxCnt</span> {
                <span style=color:#a6e22e>maxCnt</span> = <span style=color:#a6e22e>res</span>
            }
        }
    }
    
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>maxCnt</span>
    
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span> [][]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>dp</span> [][]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {
    <span style=color:#75715e>// return the largest one from four direction
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>dp</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> {
        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>dp</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>]
    }
    
    <span style=color:#75715e>// is boarder？
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>up</span>, <span style=color:#a6e22e>down</span>, <span style=color:#a6e22e>right</span>, <span style=color:#a6e22e>left</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>
    
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span> &lt; len(<span style=color:#a6e22e>matrix</span>) {
        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] {
            <span style=color:#a6e22e>up</span> = <span style=color:#ae81ff>0</span>
        } <span style=color:#66d9ef>else</span> {
            <span style=color:#a6e22e>up</span> = <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>dp</span>, <span style=color:#a6e22e>i</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>j</span>)
        }
    }
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> {
        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] {
            <span style=color:#a6e22e>down</span> = <span style=color:#ae81ff>0</span>
        } <span style=color:#66d9ef>else</span> {
            <span style=color:#a6e22e>down</span> = <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>dp</span>, <span style=color:#a6e22e>i</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>j</span>)
        }
    }
    
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span> &lt; len(<span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>0</span>]) {
        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] {
            <span style=color:#a6e22e>right</span> = <span style=color:#ae81ff>0</span>
        } <span style=color:#66d9ef>else</span> {
            <span style=color:#a6e22e>right</span> = <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>dp</span>, <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)
        }
        
    }
    
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> {
        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] {
            <span style=color:#a6e22e>left</span> = <span style=color:#ae81ff>0</span>
        } <span style=color:#66d9ef>else</span> {
            <span style=color:#a6e22e>left</span> = <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>dp</span>, <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>)
        }
    }
    
    <span style=color:#a6e22e>dp</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] = <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>left</span>, <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>down</span>, <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>right</span>, <span style=color:#a6e22e>up</span>))) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span> 
    
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>dp</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>]
}


<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span>)<span style=color:#66d9ef>int</span> {
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>a</span> &gt; <span style=color:#a6e22e>b</span> {
        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span>
    } <span style=color:#66d9ef>else</span> {
        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>b</span>
    }
}</code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.bing0ne.com/tags/leetcode>LeetCode</a></li></ul></footer><div id=disqus_thread></div><script>var disqus_shortname='bing0ne';(function(){var d=document,s=d.createElement('script');s.src='https://'+disqus_shortname+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>&copy; 2019 <a href=https://blog.bing0ne.com>bing0ne Base</a></span>
<span>&middot;</span>
<span>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</span>
<span>&middot;</span>
<span>Theme️ <a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper</a></span></footer><script src=https://blog.bing0ne.com/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>